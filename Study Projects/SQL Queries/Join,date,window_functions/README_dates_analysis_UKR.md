
# Проект Аналізу Рекламних Кампаній у Facebook та Google з Використанням Дат і Віконних Функцій в SQL

Цей проект спрямований на аналіз даних рекламних кампаній у Facebook та Google з використанням функцій для роботи з датами та віконних функцій для розрахунку змін метрик з місяця в місяць.

## Основні Цілі Проекту

1. Застосування CTE для об'єднання даних з таблиць `facebook_ads_basic_daily` і `google_ads_basic_daily`.
2. Обчислення місячних значень для таких метрик, як витрати, покази, кліки, value конверсій.
3. Розрахунок відносної зміни (у відсотках) для метрик CPM, CTR, ROMI в кожен місяць порівняно з попереднім.

## Структура Проекту

### `campaign_analysis_with_window_functions.sql`
SQL-запит, що виконує:
1. **Об’єднання Даних з Facebook та Google**: Використання `UNION ALL` для поєднання метрик за допомогою CTE.
2. **Агрегація за місяцями**: Використання функцій `date_trunc` для створення поля `ad_month`, що показує перший день місяця показу реклами.
3. **Обробка URL Параметрів**: Витягування значення `utm_campaign` з URL параметрів за допомогою регулярних виразів.
4. **Розрахунок Відсоткових Змін за Місяцями**: Використання віконних функцій для обчислення відсоткової зміни CPM, CTR, ROMI порівняно з попереднім місяцем.

## Критерії Виконання

- SQL-запит коректно об’єднує та агрегує дані з декількох таблиць.
- Показники CPM, CTR, ROMI обчислені для кожного місяця та відсотково порівняні з попереднім місяцем.
- Параметри URL (наприклад, `utm_campaign`) правильно оброблені за допомогою регулярних виразів.

## Приклад Виконання

Запит можна виконати безпосередньо в середовищі SQL, що підтримує CTE та віконні функції. Результат запиту повинен показувати місячні значення метрик для кожної рекламної кампанії та їх зміни порівняно з попереднім місяцем, що допомагає оцінити ефективність кампаній у часі.

Висновки по проекту
Обробка дат і агрегування за місяцями: Використання date_trunc('month', ad_date) дозволило коректно створити щомісячні інтервали, що є основою для подальшого аналізу.
Розрахунок основних метрик: Метрики CPM, CTR, CPC і ROMI коректно розраховані з уникненням ділення на нуль, що забезпечує точність даних.
Порівняння з попереднім місяцем: Віконні функції ефективно використовуються для обчислення змін метрик у відсотках, що допомагає зрозуміти динаміку кампаній.
Чистота даних: Використання substring для витягнення utm_campaign і обробка значень null допомагають забезпечити точність і повноту аналізу.
Проект дає глибоке розуміння місячних змін у ефективності кампаній і може бути корисним для прийняття рішень щодо оптимізації рекламних витрат.